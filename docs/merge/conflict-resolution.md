# Разрешение конфликтов с README и планами

Этот документ описывает рекомендуемый порядок разрешения конфликтов при слиянии веток,
особенно когда конфликтуют `README.md` и документы планирования.

## 1) README.md: стратегия и автоматизация

### Рекомендованная стратегия
1. Оставляйте `README.md` как индекс с ссылками на основные документы.
2. Исторические или веточные варианты README сохраняйте в `readmes/`.
3. При конфликте основным источником считается `origin/main`.

### Скрипт автоматического разрешения

Используйте скрипт:

```bash
scripts/resolve-readme-conflicts.sh --base origin/main --archive-dir readmes
```

Что делает скрипт:
- сохраняет веточный README в `readmes/README-<sha>-<branch>.md`;
- восстанавливает `README.md` из `origin/main`;
- добавляет оба файла в индекс.

## 2) Плановые документы

### Рекомендации
- `project_plan.md` больше не является главным файлом. Используйте `plans/plan-roadmap.md`.
- Если в конфликте есть правки к плану, переносите их вручную в `plans/plan-roadmap.md`.

## 3) Включение git rerere (запоминание конфликтов)

Git умеет запоминать, как вы решали конфликт, и повторно применять решение:

```bash
git config rerere.enabled true
git config rerere.autoupdate true
```

Рекомендация: включите это в репозитории перед массовыми слияниями.

## 4) Базовый порядок слияния

```bash
git fetch origin
git checkout <branch>
git merge origin/main
# если есть конфликты:
# 1) README.md → скрипт
# 2) планы → перенос в plans/plan-roadmap.md
# 3) add/commit
```


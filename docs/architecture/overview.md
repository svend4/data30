# Обзор целевой архитектуры

## Контекст
Целевая архитектура описывает систему как набор сервисов, обеспечивающих доступ пользователей к функциональности через web-интерфейс и программные API. Система предназначена для масштабирования, надежной интеграции с внешними провайдерами и изоляции доменной логики от инфраструктурных зависимостей.

## Ключевые подсистемы
- **Web UI** — пользовательский интерфейс, реализующий сценарии работы и взаимодействие с API.
- **API Gateway** — единая точка входа для клиентов, маршрутизация запросов, ограничение нагрузки, аудит.
- **Сервис аутентификации** — управление идентификацией, токенами и политиками доступа.
- **Core Service** — доменная логика, оркестрация бизнес-процессов.
- **Data Store** — основное хранилище данных, транзакционная консистентность.
- **Cache** — ускорение чтения часто используемых данных.
- **Message Broker + Async Worker** — асинхронные задачи, фоновые процессы и интеграции.

## Масштабирование и надежность
- **Горизонтальное масштабирование**: Web UI, API Gateway и Core Service запускаются как stateless-инстансы за балансировщиком; масштабирование основано на метриках RPS и латентности.
- **Надежные интеграции**: Message Broker обеспечивает гарантированную доставку событий, ретраи и разгрузку внешних систем через асинхронные воркеры.
- **Стабильность чтений**: Cache снижает нагрузку на Data Store и уменьшает p95 латентность для популярных запросов.
- **Контроль нагрузки**: API Gateway реализует rate limiting, circuit breaking и аудит, защищая ядро от всплесков трафика.
- **Наблюдаемость**: сквозные трассировки, метрики ошибок и алерты по SLA связывают компоненты и ускоряют реакцию на инциденты.

## Границы системы
- **Внутренний контур**: Web UI, API Gateway, сервис аутентификации, Core Service, хранилища и брокер сообщений.
- **Внешние зависимости**: Identity Provider, партнерские системы, платежные и аналитические провайдеры.
- **Зона ответственности**: доменная логика, управление доступом, хранение данных, обработка событий.
- **Вне зоны ответственности**: поддержка инфраструктуры внешних провайдеров, внешние политики безопасности.

## Интеграции
- **Identity Provider** — OAuth/SAML для единого входа и федерации пользователей.
- **Партнерские системы** — REST/Webhooks для обмена данными и уведомлениями.
- **Платежные провайдеры** — API для проведения и подтверждения транзакций.

## Диаграммы
- [Контекстная диаграмма](diagrams/context-diagram.mmd)
- [Диаграмма компонентов](diagrams/component-diagram.mmd)

---
Версия: 1.1

Последнее обновление: 2026-01-09

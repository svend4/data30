# KPI: метрики качества рекомендаций и времени запуска

## 1. Определения метрик (измеримые)

| Метрика | Определение | Единица | Формула/комментарий |
| --- | --- | --- | --- |
| **TTFV (Time To First Value)** | Время от старта настройки проекта до получения первого полезного результата (показ рекомендаций с кликом/применением). | минуты | `timestamp(first_value_event) - timestamp(onboarding_start)` |
| **Precision@K** | Доля релевантных рекомендаций в топ‑K выдачи. | % | `relevant_recommendations / K` |
| **Recall@K** | Доля найденных релевантных рекомендаций из всех релевантных. | % | `relevant_recommendations / total_relevant` |
| **TTR (Time To Result)** | Время от запуска расчёта до первого результата в интерфейсе. | секунды | `timestamp(first_result_event) - timestamp(reco_job_start)` |

## 2. Метод измерения

1. **Логирование событий**
   - `onboarding_start` — начало настройки.
   - `reco_job_start` — старт вычисления рекомендаций.
   - `first_result_event` — первый результат отображён в UI.
   - `first_value_event` — пользователь подтвердил ценность (клик/применение рекомендации).
   - `recommendation_shown` / `recommendation_clicked` — события для Precision/Recall.
2. **Контрольная выборка**
   - Еженедельная выборка N=200 с ручной разметкой релевантности (продукт + доменный эксперт).
3. **A/B‑тестирование**
   - 50/50 сплит: текущий алгоритм vs. улучшенный.
   - Primary метрики: Precision@K, Recall@K; secondary: TTFV, TTR.

## 3. Целевые значения (MVP и Beta)

| Метрика | MVP (цель) | Beta (цель) |
| --- | --- | --- |
| **TTFV** | ≤ 30 мин | ≤ 15 мин |
| **Precision@5** | ≥ 55% | ≥ 65% |
| **Recall@5** | ≥ 35% | ≥ 45% |
| **TTR** | ≤ 10 сек | ≤ 5 сек |

## 4. Фиксация и согласование

- Документ утверждён на уровне продукта и инженерии.
- Ответственные: Product Owner + Tech Lead.
- Дата согласования: _TBD_.
- Следующий пересмотр: через 4 недели после запуска Beta.

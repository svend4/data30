# data30

## Отзывы и рекомендации

### 1. Разделение оценок
- **Оценка качества**: соответствует ли артефакт заявленным требованиям, работает ли стабильно, корректно ли описан.
- **Оценка полезности**: насколько артефакт помог решить задачу пользователя, сэкономил время или улучшил результат.
- Оценки собираются раздельно, чтобы отличать объективную стабильность от субъективной пользы.

### 2. Привязка отзывов к подтвержденному использованию
- Отзыв можно оставить только после подтвержденного использования (лог события, подтвержденный запуск, отметка в системе).
- Отзыв помечается как **verified** и используется в расчетах рейтинга/рекомендаций.
- Неподтвержденные отзывы сохраняются отдельно и не влияют на итоговые статусы.

### 3. Статус зрелости
Статусы отражают готовность и надежность артефакта:
- **Прототип** — экспериментальный, возможны критические ограничения.
- **Стабильное** — проверен на практике, ограниченное количество дефектов.
- **Рекомендовано** — доказанная надежность и полезность, подтвержденные метриками.

### 4. Механизм модерации и анти-спама
- Автоматическая проверка на дубликаты и спам (повторяющийся текст, подозрительные паттерны).
- Ограничение частоты публикации отзывов от одного пользователя/организации.
- Ручная модерация спорных отзывов и возможность апелляции.
- Репутационные коэффициенты для пользователей с историей подтвержденных отзывов.

### 5. Критерии «рекомендаций» и «лидеров кластера»
- **Рекомендации** присваиваются при выполнении порогов:
  - Минимальное количество подтвержденных отзывов.
  - Средняя оценка качества и полезности выше заданного уровня.
  - Отсутствие критических дефектов за последний период.
- **Лидеры кластера** определяются по сочетанию:
  - Максимальный индекс полезности в своем кластере.
  - Стабильность качества на горизонте времени.
  - Уровень внедрения/использования по подтвержденным данным.
## 1. Структура макроса

**Стандартная структура:** триггер → шаги → условия → ошибки → результат.

- **Триггер** — событие или сигнал, который запускает выполнение.
  - Примеры: входящее письмо, изменение статуса, ручной запуск.
- **Шаги** — упорядоченный набор действий, которые выполняются после триггера.
  - Каждый шаг имеет тип действия и параметры.
- **Условия** — правила, ограничивающие выполнение макроса или отдельных шагов.
  - Примеры: фильтр по полям, проверка контекста, контроль времени.
- **Ошибки** — обработка исключительных ситуаций и политика повторов.
  - Примеры: ретраи, уведомления, альтернативные ветки.
- **Результат** — ожидаемый выход/эффект, статус выполнения и артефакты.
  - Примеры: созданная задача, отправленное уведомление, запись в журнал.

## 2. Единый формат хранения макросов (JSON-шаблон)

```json
{
  "id": "string",
  "name": "string",
  "version": "1.0",
  "description": "string",
  "trigger": {
    "type": "string",
    "params": {}
  },
  "steps": [
    {
      "id": "string",
      "type": "string",
      "params": {},
      "conditions": [
        {
          "type": "string",
          "params": {}
        }
      ],
      "on_error": {
        "strategy": "retry|skip|abort|fallback",
        "retries": 0,
        "fallback_step_id": "string"
      }
    }
  ],
  "conditions": [
    {
      "type": "string",
      "params": {}
    }
  ],
  "errors": {
    "default_strategy": "retry|skip|abort",
    "notify": ["email", "slack", "webhook"],
    "log_level": "info|warn|error"
  },
  "result": {
    "status": "success|partial|failed",
    "outputs": {}
  },
  "metadata": {
    "tags": ["string"],
    "owner": "string",
    "created_at": "ISO-8601",
    "updated_at": "ISO-8601"
  }
}
```

## 3. Базовые макросы (5–10 популярных сценариев)

Ниже — 8 базовых макросов в предложенном JSON-формате (сокращённо, без служебных полей).

### 3.1. Автоответ на входящее письмо
```json
{
  "id": "macro-auto-reply",
  "name": "Автоответ клиенту",
  "trigger": {"type": "email_received", "params": {"mailbox": "support@"}},
  "steps": [
    {"id": "send-reply", "type": "send_email", "params": {"template": "auto_reply"}}
  ],
  "conditions": [{"type": "subject_contains", "params": {"value": "заявка"}}],
  "errors": {"default_strategy": "retry", "notify": ["email"], "log_level": "warn"},
  "result": {"status": "success"}
}
```

### 3.2. Создание задачи из письма
```json
{
  "id": "macro-email-to-task",
  "name": "Письмо → задача",
  "trigger": {"type": "email_received", "params": {"mailbox": "support@"}},
  "steps": [
    {"id": "create-task", "type": "create_task", "params": {"project": "Support"}}
  ],
  "conditions": [{"type": "sender_domain", "params": {"value": "customer.com"}}],
  "errors": {"default_strategy": "retry", "notify": ["slack"], "log_level": "error"},
  "result": {"status": "success"}
}
```

### 3.3. Назначение ответственного при новом тикете
```json
{
  "id": "macro-assign-agent",
  "name": "Автоназначение ответственного",
  "trigger": {"type": "ticket_created", "params": {"queue": "L1"}},
  "steps": [
    {"id": "assign", "type": "assign_user", "params": {"strategy": "round_robin"}}
  ],
  "conditions": [{"type": "priority_in", "params": {"values": ["low", "normal"]}}],
  "errors": {"default_strategy": "skip", "notify": ["slack"], "log_level": "warn"},
  "result": {"status": "success"}
}
```

### 3.4. Эскалация при просрочке SLA
```json
{
  "id": "macro-sla-escalation",
  "name": "Эскалация SLA",
  "trigger": {"type": "sla_breached", "params": {"threshold": "15m"}},
  "steps": [
    {"id": "notify", "type": "notify", "params": {"channel": "slack", "room": "#oncall"}}
  ],
  "conditions": [{"type": "ticket_status", "params": {"value": "open"}}],
  "errors": {"default_strategy": "retry", "notify": ["email"], "log_level": "error"},
  "result": {"status": "success"}
}
```

### 3.5. Обновление статуса по завершению задачи
```json
{
  "id": "macro-close-ticket",
  "name": "Закрытие тикета при решении",
  "trigger": {"type": "task_completed", "params": {"project": "Support"}},
  "steps": [
    {"id": "update", "type": "update_ticket", "params": {"status": "closed"}}
  ],
  "conditions": [{"type": "resolution_code", "params": {"value": "solved"}}],
  "errors": {"default_strategy": "retry", "notify": ["slack"], "log_level": "warn"},
  "result": {"status": "success"}
}
```

### 3.6. Синхронизация контакта с CRM
```json
{
  "id": "macro-crm-sync",
  "name": "Синхронизация контакта",
  "trigger": {"type": "contact_updated", "params": {"source": "support"}},
  "steps": [
    {"id": "sync", "type": "upsert_crm_contact", "params": {"crm": "HubSpot"}}
  ],
  "conditions": [{"type": "field_changed", "params": {"value": "email"}}],
  "errors": {"default_strategy": "retry", "notify": ["email"], "log_level": "error"},
  "result": {"status": "success"}
}
```

### 3.7. Напоминание о необработанном тикете
```json
{
  "id": "macro-idle-reminder",
  "name": "Напоминание о простое",
  "trigger": {"type": "ticket_idle", "params": {"duration": "2h"}},
  "steps": [
    {"id": "remind", "type": "notify", "params": {"channel": "email", "template": "idle_reminder"}}
  ],
  "conditions": [{"type": "assignee_exists", "params": {"value": true}}],
  "errors": {"default_strategy": "skip", "notify": ["email"], "log_level": "warn"},
  "result": {"status": "success"}
}
```

### 3.8. Выставление счета после закрытия
```json
{
  "id": "macro-invoice-on-close",
  "name": "Счет после закрытия",
  "trigger": {"type": "ticket_closed", "params": {"queue": "Billing"}},
  "steps": [
    {"id": "invoice", "type": "create_invoice", "params": {"template": "standard"}}
  ],
  "conditions": [{"type": "tag_contains", "params": {"value": "billable"}}],
  "errors": {"default_strategy": "retry", "notify": ["email"], "log_level": "error"},
  "result": {"status": "success"}
}
```

## 4. Рекомендации по автоматическому подбору макросов

- **Классифицируйте входящие события** по типам (почта, тикеты, CRM, биллинг), чтобы быстро сузить набор подходящих макросов.
- **Используйте веса и теги**: каждому макросу задайте теги и приоритеты. Ранжирование по совпадению тегов и истории успешных срабатываний.
- **Учитывайте контекст**: отдел, роль, время суток, регион, приоритет обращения — это повышает точность подбора.
- **Добавьте «обучение от выбора»**: сохраняйте, какие макросы выбирают сотрудники, и постепенно поднимайте их рейтинг.
- **Фильтруйте по условиям**: сначала отсекайте несовместимые макросы (условия), затем выбирайте лучший по скору.

## 5. Метрики качества макроса

- **Время настройки**
  - Среднее время от создания до первого успешного запуска (минуты/часы).
  - Количество итераций правок до стабильной работы.
- **Надежность**
  - Доля успешных запусков (Success Rate).
  - Частота ошибок по типам (ошибки триггеров, шагов, интеграций).
  - Среднее число ретраев на 1 запуск.
- **Эффективность**
  - Снижение ручных операций (в минутах/задачах).
  - Влияние на SLA (сокращение просрочек).
- **Полезность**
  - Частота использования макроса.
  - Оценка пользователей (CSAT/внутренние оценки).
## Карты бизнес‑сценариев

Ниже представлены 10 ключевых бизнес‑сценариев с типовыми pipeline, привязкой функций/приложений и запасными ветками.

### 1) Лидогенерация и квалификация
| Шаг | Артефакты | Основные функции/приложения | Запасные ветки |
| --- | --- | --- | --- |
| 1. Сбор лидов | Формы, лендинги, источники трафика | Landing page, формы CRM | Google Forms, Tilda |
| 2. Обогащение | Карточка лида, контакты | Clearbit, CRM enrichment | Hunter, Snov.io |
| 3. Скоринг | Оценка лида, сегмент | Lead scoring CRM | Custom scoring в BI |
| 4. Передача в продажу | MQL/SQL, SLA | CRM workflow | Email‑триаж |

### 2) Продажи (воронка и сделки)
| Шаг | Артефакты | Основные функции/приложения | Запасные ветки |
| --- | --- | --- | --- |
| 1. Контакт | Запись звонка, notes | CRM, телефония | Google Sheets + VoIP |
| 2. Коммерческое предложение | КП, прайс | CPQ, Docs | Шаблоны в Docs |
| 3. Переговоры | История коммуникаций | CRM, email | Почта + календарь |
| 4. Закрытие сделки | Счет, договор | e‑Signature, ERP | PDF + ручная подпись |

### 3) Маркетинг‑контент (контент‑поток)
| Шаг | Артефакты | Основные функции/приложения | Запасные ветки |
| --- | --- | --- | --- |
| 1. Планирование | Контент‑календарь | Notion/Asana | Google Sheets |
| 2. Производство | Черновики, ассеты | Docs, Figma | Canva, Miro |
| 3. Ревью/согласование | Комментарии, правки | Workflow/Approvals | Email + Docs |
| 4. Публикация | Посты, ссылки | CMS, SMM | Buffer, Hootsuite |

### 4) Клиентская поддержка
| Шаг | Артефакты | Основные функции/приложения | Запасные ветки |
| --- | --- | --- | --- |
| 1. Прием обращения | Тикет, категория | Helpdesk | Email‑ящик |
| 2. Классификация | Теги, приоритет | Автотеггинг | Ручная сортировка |
| 3. Решение | Ответ, база знаний | KB + макросы | FAQ в Docs |
| 4. Закрытие/CSAT | Оценка, отчеты | CSAT/NPS | Опросник Forms |

### 5) Онбординг клиента
| Шаг | Артефакты | Основные функции/приложения | Запасные ветки |
| --- | --- | --- | --- |
| 1. Подготовка | План внедрения | PM‑система | Таблица + чеклист |
| 2. Конфигурация | Настройки, доступы | IAM, Product setup | Ручная настройка |
| 3. Обучение | Гайды, записи | LMS, вебинары | Видео + Docs |
| 4. Go‑Live | Акт запуска, SLA | CRM/CSM | Email‑подтверждение |

### 6) Бухгалтерия и финансы
| Шаг | Артефакты | Основные функции/приложения | Запасные ветки |
| --- | --- | --- | --- |
| 1. Выставление счетов | Счета, акты | ERP/Accounting | Шаблоны PDF |
| 2. Платежи | Выписки, платежки | Bank API | Ручная загрузка |
| 3. Сверка | Реестр платежей | Reconciliation | Табличная сверка |
| 4. Отчетность | Баланс, P&L | BI/Accounting | Экспорт в Excel |

### 7) Логистика и доставка
| Шаг | Артефакты | Основные функции/приложения | Запасные ветки |
| --- | --- | --- | --- |
| 1. Формирование заказа | Order ID, накладная | OMS/WMS | Google Sheets |
| 2. Подбор/упаковка | Сборочный лист | WMS | Ручной лист |
| 3. Отгрузка | ТТН, трек‑номер | 3PL/Carrier API | Ручная заявка |
| 4. Доставка/подтверждение | POD, статус | TMS/Tracking | Email/звонок |

### 8) HR‑рекрутинг
| Шаг | Артефакты | Основные функции/приложения | Запасные ветки |
| --- | --- | --- | --- |
| 1. Поиск кандидатов | Воронка, CV | ATS | Google Sheets |
| 2. Скрининг | Notes, scorecard | ATS + календарь | Email + Docs |
| 3. Интервью | Записи, фидбек | Zoom/Meet | Телефон |
| 4. Оффер | Offer letter | HRIS/e‑Sign | PDF + подпись |

### 9) Управление продуктом и разработкой
| Шаг | Артефакты | Основные функции/приложения | Запасные ветки |
| --- | --- | --- | --- |
| 1. Сбор требований | PRD, backlog | Jira/Confluence | Notion |
| 2. Планирование | Roadmap, спринт | Jira | Trello |
| 3. Разработка | Код, MR/PR | Git, CI | Патч‑процесс |
| 4. Релиз | Release notes | CI/CD | Ручной деплой |

### 10) Аналитика и отчетность
| Шаг | Артефакты | Основные функции/приложения | Запасные ветки |
| --- | --- | --- | --- |
| 1. Сбор данных | Логи, события | ETL/ELT | CSV‑экспорт |
| 2. Хранилище | DWH, витрины | BigQuery/Snowflake | Postgres |
| 3. Анализ | Метрики, дашборды | BI | Google Data Studio |
| 4. Рассылка | Отчеты, алерты | Slack/Email alerts | Ручная рассылка |
## Цель
Метаслой для поиска, интеграции и повторного использования готовых решений.

## Глоссарий: базовые категории функций
- **Ввод данных** — получение данных из форм, API, файлов, веб-скрейпинга, датчиков.
- **Вывод данных** — отображение, экспорт, отправка в сторонние системы.
- **Трансформация** — очистка, нормализация, обогащение, сопоставление, агрегация.
- **Хранение** — базы данных, файлы, облачные хранилища, кэши.
- **Уведомления** — email, мессенджеры, вебхуки, push.
- **Аналитика** — отчёты, дашборды, метрики, прогнозирование.
- **Оркестрация** — очереди, расписания, триггеры, пайплайны.
- **Безопасность** — доступы, аудит, шифрование, комплаенс.

## Минимальный паспорт функции
- **Название**
- **Назначение/описание**
- **Входы** (формат, обязательность, ограничения)
- **Выходы** (формат, гарантии)
- **Условия выполнения** (триггеры, зависимости)
- **Ограничения** (лимиты, квоты, SLA)
- **Цена** (стоимость за запуск/месяц, фримиум)
- **Уровень зрелости** (Prototype/Stable/Recommended)
- **Пример использования**

## Примеры
- **WordPress‑плагины**: формы, SEO, кеширование, интеграции CRM.
- **Make.com‑сценарии**: автоматизация заявок, синхронизация таблиц и CRM, рассылки.
- **SaaS‑модули**: биллинг, аналитика, уведомления, авторизация.

## Словник (MVP, 10–20 функций)
1. **Сбор данных из форм** — принимать ввод с сайта и сохранять в таблицу/CRM.
2. **Импорт CSV** — загрузка и валидация табличных данных.
3. **Экспорт CSV/XLSX** — выгрузка данных по фильтрам.
4. **Вебхук‑приёмник** — приём событий от внешних систем.
5. **Вебхук‑отправитель** — отправка событий в внешние сервисы.
6. **Очистка данных** — удаление дублей, нормализация форматов.
7. **Сопоставление сущностей** — связывание контактов/компаний/заказов.
8. **Обогащение данных** — добавление сведений из внешних API.
9. **Планировщик задач** — запуск по расписанию/CRON.
10. **Очередь задач** — асинхронная обработка запросов.
11. **Уведомление email** — шаблоны писем и рассылка.
12. **Уведомление в мессенджер** — Slack/Telegram/Teams.
13. **Хранение файлов** — загрузка и доступ к документам.
14. **Хранение данных** — таблица/БД для сущностей.
15. **Дашборд метрик** — базовая аналитика по событиям.
16. **Отчёт по KPI** — периодическая агрегация и выгрузка.
17. **Авторизация** — логин/SSO/ролевая модель.
18. **Биллинг** — подписки, счета, оплатa.

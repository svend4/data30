# Паспорт функций — базовая спецификация и MVP‑словарь

## 1. Назначение Function Dictionary
Function Dictionary (словарь функций) — это единый каталог функций с согласованными названиями, категориями и краткими описаниями. Он служит «слоем договорённости» между аналитиками, инженерами и владельцами продукта: любой участник команды понимает, что именно делает функция, как её искать, и где она применима. Такой словарь ускоряет проектирование и интеграции, потому что снимает неоднозначность терминов и позволяет переиспользовать уже описанные функции, а не изобретать новые с нуля.

Помимо удобства поиска, Function Dictionary обеспечивает управляемость: становится проще оценивать покрытие потребностей, контролировать дубли, поддерживать консистентность интерфейсов и закладывать требования к качеству и безопасности. Он также является «входной точкой» для разработки API и автоматизации — каждый паспорт функции фиксирует контракт и ожидаемое поведение.

## 2. Поля паспорта функции
Минимальный набор полей паспорта:
- **ID** — уникальный идентификатор записи (например, `F-001`).
- **Имя** — нормализованное имя функции в `snake_case`.
- **Категория** — группа функций (из утверждённого перечня категорий).
- **Входы** — список входных параметров (тип, обязательность, формат).
- **Выходы** — список возвращаемых полей (тип, формат).
- **Ошибки** — коды/типы ошибок и условия возникновения.
- **Ограничения** — лимиты, квоты, размеры, RPS.
- **Пример** — короткий пример входа/выхода.

## 3. Категории функций
| Категория | Краткое описание |
| --- | --- |
| Ввод/вывод | Чтение, запись, экспорт и импорт данных и файлов. |
| Трансформация | Преобразование форматов, нормализация, агрегирование, объединение. |
| Хранение | Операции с БД, объектными хранилищами, таблицами. |
| Коммуникации | HTTP/SMTP/очереди/вебхуки/уведомления. |
| Поиск/извлечение | Фильтрация, выборка, поиск по индексу/тексту. |
| Валидация | Проверка форматов и бизнес‑правил. |
| Качество данных | Дедупликация, заполнение пропусков, контроль целостности. |
| Безопасность | Шифрование, маскирование, аудит, контроль доступа. |
| Аналитика | Метрики, статистика, расчёт показателей, ML‑признаки. |
| Оркестрация | Планирование, запуск и мониторинг задач/пайплайнов. |

## 4. Шаблон паспорта функции (таблица)
| Поле | Описание |
| --- | --- |
| ID | Уникальный идентификатор функции |
| Имя | Нормализованное имя функции |
| Категория | Одна из утверждённых категорий |
| Назначение | Что делает функция |
| Входы | Типы, формат, обязательность |
| Выходы | Типы, формат |
| Ошибки | Коды, форматы, условия |
| Ограничения | Лимиты, квоты, RPS |
| Пример | Пример входа/выхода |

## 5. MVP‑словарь функций (100 шт.)
| ID | Имя | Категория | Краткое описание |
| --- | --- | --- | --- |
| F-001 | read_csv | Ввод/вывод | Чтение CSV в табличную структуру. |
| F-002 | write_csv | Ввод/вывод | Запись таблицы в CSV‑файл. |
| F-003 | read_json | Ввод/вывод | Чтение JSON‑файла в объект. |
| F-004 | write_json | Ввод/вывод | Запись объекта в JSON‑файл. |
| F-005 | read_parquet | Ввод/вывод | Чтение Parquet в табличную структуру. |
| F-006 | write_parquet | Ввод/вывод | Запись таблицы в Parquet. |
| F-007 | read_excel | Ввод/вывод | Чтение Excel‑файла (xlsx). |
| F-008 | write_excel | Ввод/вывод | Запись таблицы в Excel‑файл. |
| F-009 | generate_report | Ввод/вывод | Генерация отчёта по шаблону. |
| F-010 | export_pdf | Ввод/вывод | Экспорт табличных данных в PDF. |
| F-011 | normalize_phone | Трансформация | Нормализация телефона в формат E.164. |
| F-012 | normalize_email | Трансформация | Очистка и приведение email к нижнему регистру. |
| F-013 | parse_date | Трансформация | Разбор даты в ISO‑формат. |
| F-014 | format_date | Трансформация | Форматирование ISO‑даты в заданный шаблон. |
| F-015 | to_uppercase | Трансформация | Приведение строк к верхнему регистру. |
| F-016 | to_lowercase | Трансформация | Приведение строк к нижнему регистру. |
| F-017 | trim_whitespace | Трансформация | Удаление пробелов по краям строки. |
| F-018 | replace_regex | Трансформация | Поиск и замена по регулярному выражению. |
| F-019 | split_string | Трансформация | Разделение строки по разделителю. |
| F-020 | join_strings | Трансформация | Объединение массива строк с разделителем. |
| F-021 | group_by | Трансформация | Группировка и агрегирование по ключам. |
| F-022 | aggregate_sum | Трансформация | Суммирование числового поля. |
| F-023 | aggregate_avg | Трансформация | Расчёт среднего значения. |
| F-024 | pivot_table | Трансформация | Преобразование таблицы в «широкий» формат. |
| F-025 | unpivot_table | Трансформация | Преобразование в «длинный» формат. |
| F-026 | join_tables | Трансформация | Соединение таблиц по ключам. |
| F-027 | merge_datasets | Трансформация | Объединение нескольких наборов данных. |
| F-028 | calculate_percentile | Аналитика | Расчёт перцентиля для массива значений. |
| F-029 | calculate_zscore | Аналитика | Расчёт Z‑оценки. |
| F-030 | normalize_minmax | Аналитика | Min‑Max нормализация значения. |
| F-031 | tokenize_text | Трансформация | Токенизация текстовой строки. |
| F-032 | stem_text | Трансформация | Стемминг токенов. |
| F-033 | lemmatize_text | Трансформация | Лемматизация токенов. |
| F-034 | detect_language | Аналитика | Определение языка текста. |
| F-035 | translate_text | Коммуникации | Перевод текста на заданный язык. |
| F-036 | classify_text | Аналитика | Классификация текста по меткам. |
| F-037 | extract_entities | Аналитика | Извлечение сущностей из текста. |
| F-038 | summarize_text | Аналитика | Автоматическое краткое резюме текста. |
| F-039 | hash_sha256 | Безопасность | Хэширование SHA‑256. |
| F-040 | hash_md5 | Безопасность | Хэширование MD5. |
| F-041 | encrypt_aes | Безопасность | Шифрование AES. |
| F-042 | decrypt_aes | Безопасность | Дешифрование AES. |
| F-043 | mask_pii | Безопасность | Маскирование персональных данных. |
| F-044 | compute_checksum | Безопасность | Контрольная сумма для файла/данных. |
| F-045 | sign_payload | Безопасность | Подпись полезной нагрузки. |
| F-046 | verify_signature | Безопасность | Проверка цифровой подписи. |
| F-047 | validate_json_schema | Валидация | Проверка JSON по схеме. |
| F-048 | validate_email | Валидация | Проверка email на формат и домен. |
| F-049 | validate_phone | Валидация | Проверка корректности телефона. |
| F-050 | validate_required_fields | Валидация | Проверка обязательных полей. |
| F-051 | validate_range | Валидация | Проверка попадания значения в диапазон. |
| F-052 | validate_enum | Валидация | Проверка значения по списку допустимых. |
| F-053 | deduplicate_rows | Качество данных | Удаление дублей по ключам. |
| F-054 | detect_nulls | Качество данных | Поиск пустых/NULL значений. |
| F-055 | fill_missing | Качество данных | Заполнение пропусков по стратегии. |
| F-056 | standardize_units | Качество данных | Приведение единиц измерения. |
| F-057 | detect_outliers | Качество данных | Поиск выбросов в числовых данных. |
| F-058 | enforce_schema | Качество данных | Приведение типов по схеме. |
| F-059 | filter_rows | Поиск/извлечение | Фильтрация строк по условию. |
| F-060 | sort_rows | Поиск/извлечение | Сортировка набора данных. |
| F-061 | search_text | Поиск/извлечение | Полнотекстовый поиск по индексу. |
| F-062 | search_by_id | Поиск/извлечение | Поиск записи по идентификатору. |
| F-063 | query_sql | Хранение | Выполнение SQL‑запроса к БД. |
| F-064 | create_table | Хранение | Создание таблицы в БД. |
| F-065 | insert_rows | Хранение | Вставка строк в таблицу. |
| F-066 | update_rows | Хранение | Обновление строк по условию. |
| F-067 | delete_rows | Хранение | Удаление строк по условию. |
| F-068 | create_index | Хранение | Создание индекса. |
| F-069 | backup_dataset | Хранение | Бэкап набора данных. |
| F-070 | restore_dataset | Хранение | Восстановление набора данных. |
| F-071 | export_s3 | Хранение | Экспорт данных в S3‑хранилище. |
| F-072 | import_s3 | Хранение | Импорт данных из S3. |
| F-073 | http_request | Коммуникации | Универсальный HTTP‑запрос. |
| F-074 | send_email | Коммуникации | Отправка email‑сообщения. |
| F-075 | send_sms | Коммуникации | Отправка SMS. |
| F-076 | call_webhook | Коммуникации | Вызов внешнего вебхука. |
| F-077 | publish_queue | Коммуникации | Публикация сообщения в очередь. |
| F-078 | consume_queue | Коммуникации | Чтение сообщений из очереди. |
| F-079 | send_push | Коммуникации | Отправка push‑уведомления. |
| F-080 | generate_token | Безопасность | Генерация токена доступа. |
| F-081 | revoke_token | Безопасность | Отзыв токена доступа. |
| F-082 | audit_log | Безопасность | Запись события в аудит‑лог. |
| F-083 | calculate_retention | Аналитика | Расчёт ретенции по когортам. |
| F-084 | calculate_ltv | Аналитика | Расчёт LTV клиента. |
| F-085 | calculate_churn | Аналитика | Расчёт оттока. |
| F-086 | track_event | Аналитика | Запись события аналитики. |
| F-087 | recommend_items | Аналитика | Рекомендация объектов пользователю. |
| F-088 | feature_engineering | Аналитика | Генерация признаков для ML. |
| F-089 | train_model | Аналитика | Обучение ML‑модели. |
| F-090 | score_model | Аналитика | Инференс ML‑модели. |
| F-091 | schedule_job | Оркестрация | Планирование задачи по расписанию. |
| F-092 | run_pipeline | Оркестрация | Запуск пайплайна обработки. |
| F-093 | cancel_job | Оркестрация | Отмена запущенной задачи. |
| F-094 | get_job_status | Оркестрация | Получение статуса задачи. |
| F-095 | retry_failed_tasks | Оркестрация | Повтор неуспешных задач. |
| F-096 | pause_pipeline | Оркестрация | Приостановка пайплайна. |
| F-097 | resume_pipeline | Оркестрация | Возобновление пайплайна. |
| F-098 | create_alert | Оркестрация | Создание алерта по условию. |
| F-099 | resolve_alert | Оркестрация | Закрытие алерта. |
| F-100 | health_check | Оркестрация | Проверка здоровья сервиса. |

## 6. Расширенные паспорта (выборка 12 функций)

### F-001 read_csv
| Поле | Значение |
| --- | --- |
| ID | F-001 |
| Имя | read_csv |
| Категория | Ввод/вывод |
| Назначение | Чтение CSV‑файла в табличную структуру. |
| Входы | `path` (string, обязательный), `delimiter` (string, опционально, по умолчанию `,`), `encoding` (string, опционально, по умолчанию `utf-8`) |
| Выходы | `rows` (integer), `columns` (array[string]) |
| Ошибки | `FILE_NOT_FOUND`, `INVALID_ENCODING`, `PARSE_ERROR` |
| Ограничения | размер файла ≤ 2 ГБ |
| Пример | вход: `{ "path": "/data/file.csv" }`, выход: `{ "rows": 1200, "columns": ["id","name"] }` |

### F-002 write_csv
| Поле | Значение |
| --- | --- |
| ID | F-002 |
| Имя | write_csv |
| Категория | Ввод/вывод |
| Назначение | Запись таблицы в CSV‑файл. |
| Входы | `rows` (array[object], обязательный), `path` (string, обязательный), `delimiter` (string, опционально) |
| Выходы | `status` (string) |
| Ошибки | `PERMISSION_DENIED`, `WRITE_ERROR`, `INVALID_PATH` |
| Ограничения | путь должен быть доступен на запись |
| Пример | вход: `{ "rows": [{"id":1}], "path": "/out.csv" }`, выход: `{ "status": "ok" }` |

### F-011 normalize_phone
| Поле | Значение |
| --- | --- |
| ID | F-011 |
| Имя | normalize_phone |
| Категория | Трансформация |
| Назначение | Приведение телефонного номера к формату E.164. |
| Входы | `phone` (string, обязательный), `default_country` (string, опционально, ISO‑2) |
| Выходы | `normalized` (string), `is_valid` (boolean) |
| Ошибки | `VALIDATION_ERROR` |
| Ограничения | длина `phone` ≤ 32 символа |
| Пример | вход: `{ "phone": "+7 999 123-45-67" }`, выход: `{ "normalized": "+79991234567", "is_valid": true }` |

### F-048 validate_email
| Поле | Значение |
| --- | --- |
| ID | F-048 |
| Имя | validate_email |
| Категория | Валидация |
| Назначение | Проверка email на формат и допустимый домен. |
| Входы | `email` (string, обязательный), `allow_disposable` (boolean, опционально) |
| Выходы | `valid` (boolean), `reason` (string, опционально) |
| Ошибки | `VALIDATION_ERROR` |
| Ограничения | длина `email` ≤ 254 |
| Пример | вход: `{ "email": "user@example.com" }`, выход: `{ "valid": true }` |

### F-073 http_request
| Поле | Значение |
| --- | --- |
| ID | F-073 |
| Имя | http_request |
| Категория | Коммуникации |
| Назначение | Выполнение HTTP‑запроса с произвольным методом. |
| Входы | `method` (string, обязательный), `url` (string, обязательный), `headers` (object, опционально), `body` (object|string, опционально), `timeout_ms` (integer, опционально) |
| Выходы | `status` (integer), `headers` (object), `body` (object|string) |
| Ошибки | `TIMEOUT`, `CONNECTION_ERROR`, `HTTP_ERROR` |
| Ограничения | `timeout_ms` ≤ 60000 |
| Пример | вход: `{ "method": "GET", "url": "https://api.example.com" }`, выход: `{ "status": 200 }` |

### F-063 query_sql
| Поле | Значение |
| --- | --- |
| ID | F-063 |
| Имя | query_sql |
| Категория | Хранение |
| Назначение | Выполнение SQL‑запроса и возврат результата. |
| Входы | `sql` (string, обязательный), `params` (array, опционально) |
| Выходы | `rows` (array[object]), `row_count` (integer) |
| Ошибки | `SQL_SYNTAX_ERROR`, `CONNECTION_ERROR`, `TIMEOUT` |
| Ограничения | время выполнения ≤ 30 сек |
| Пример | вход: `{ "sql": "SELECT * FROM users" }`, выход: `{ "row_count": 100 }` |

### F-065 insert_rows
| Поле | Значение |
| --- | --- |
| ID | F-065 |
| Имя | insert_rows |
| Категория | Хранение |
| Назначение | Вставка строк в таблицу. |
| Входы | `table` (string, обязательный), `rows` (array[object], обязательный) |
| Выходы | `inserted` (integer) |
| Ошибки | `CONSTRAINT_VIOLATION`, `CONNECTION_ERROR` |
| Ограничения | не более 10 000 строк за вызов |
| Пример | вход: `{ "table": "users", "rows": [{"id":1}] }`, выход: `{ "inserted": 1 }` |

### F-061 search_text
| Поле | Значение |
| --- | --- |
| ID | F-061 |
| Имя | search_text |
| Категория | Поиск/извлечение |
| Назначение | Полнотекстовый поиск по индексу. |
| Входы | `query` (string, обязательный), `limit` (integer, опционально), `filters` (object, опционально) |
| Выходы | `results` (array[object]), `total` (integer) |
| Ошибки | `INDEX_NOT_FOUND`, `QUERY_SYNTAX_ERROR` |
| Ограничения | `limit` ≤ 1000 |
| Пример | вход: `{ "query": "data" }`, выход: `{ "total": 12 }` |

### F-034 detect_language
| Поле | Значение |
| --- | --- |
| ID | F-034 |
| Имя | detect_language |
| Категория | Аналитика |
| Назначение | Определение языка текста. |
| Входы | `text` (string, обязательный) |
| Выходы | `lang` (string), `confidence` (number) |
| Ошибки | `EMPTY_TEXT`, `MODEL_ERROR` |
| Ограничения | длина `text` ≥ 3 символа |
| Пример | вход: `{ "text": "Привет" }`, выход: `{ "lang": "ru", "confidence": 0.98 }` |

### F-035 translate_text
| Поле | Значение |
| --- | --- |
| ID | F-035 |
| Имя | translate_text |
| Категория | Коммуникации |
| Назначение | Перевод текста на целевой язык. |
| Входы | `text` (string, обязательный), `to` (string, обязательный, ISO‑2), `from` (string, опционально) |
| Выходы | `text` (string), `detected_lang` (string, опционально) |
| Ошибки | `LANG_NOT_SUPPORTED`, `MODEL_ERROR` |
| Ограничения | длина `text` ≤ 10 000 символов |
| Пример | вход: `{ "text": "Hello", "to": "ru" }`, выход: `{ "text": "Привет" }` |

### F-041 encrypt_aes
| Поле | Значение |
| --- | --- |
| ID | F-041 |
| Имя | encrypt_aes |
| Категория | Безопасность |
| Назначение | Шифрование данных алгоритмом AES. |
| Входы | `data` (string|binary, обязательный), `key` (string, обязательный), `iv` (string, опционально) |
| Выходы | `cipher` (string), `iv` (string) |
| Ошибки | `INVALID_KEY`, `ENCRYPTION_ERROR` |
| Ограничения | ключ 16/24/32 байта |
| Пример | вход: `{ "data": "secret", "key": "..." }`, выход: `{ "cipher": "..." }` |

### F-091 schedule_job
| Поле | Значение |
| --- | --- |
| ID | F-091 |
| Имя | schedule_job |
| Категория | Оркестрация |
| Назначение | Планирование задачи по расписанию. |
| Входы | `cron` (string, обязательный), `job` (string, обязательный), `params` (object, опционально) |
| Выходы | `job_id` (string) |
| Ошибки | `INVALID_CRON`, `SCHEDULER_ERROR` |
| Ограничения | не более 100 активных расписаний |
| Пример | вход: `{ "cron": "0 1 * * *", "job": "daily_report" }`, выход: `{ "job_id": "j1" }` |

### F-100 health_check
| Поле | Значение |
| --- | --- |
| ID | F-100 |
| Имя | health_check |
| Категория | Оркестрация |
| Назначение | Проверка доступности и зависимостей сервиса. |
| Входы | `service` (string, обязательный), `timeout_ms` (integer, опционально) |
| Выходы | `status` (string), `details` (object) |
| Ошибки | `TIMEOUT`, `SERVICE_UNAVAILABLE` |
| Ограничения | `timeout_ms` ≤ 5000 |
| Пример | вход: `{ "service": "api" }`, выход: `{ "status": "ok" }` |

## 7. Нормализация терминов
- Имена функций приводятся к `snake_case` и содержат глагол действия (`read_`, `write_`, `validate_`, `calculate_`).
- Категории фиксированы и берутся только из раздела «Категории функций».
- Из описаний удалены дубли и пересечения: например, HTTP‑вызовы сведены к `http_request`, а чтение/запись разных форматов разделены по формату файла.
- Термины «входы/выходы/ошибки/ограничения» используются единообразно во всех паспортах.

## 8. Правила расширения словаря
- **Обоснование ценности:** новая функция добавляется, если покрывает уникальную потребность или существенно упрощает повторяющийся сценарий.
- **Отсутствие дублей:** перед добавлением проверяется, нет ли существующей функции с тем же назначением.
- **Единый стиль:** имя — `snake_case`, описание — короткое, императивное.
- **Категория обязательна:** выбирается только из утверждённого списка.
- **Минимальный паспорт:** обязательны поля ID, имя, категория, входы, выходы, ошибки, ограничения, пример.
- **Версионирование:** при изменении контракта создаётся новая запись с новым ID или указанием версии.
